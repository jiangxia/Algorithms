# 什么是数组

数组（Array）是一种线性表数据结构。它用一组连续的内存空间，来存储一组具有相同类型的数据。

## 线性表

线性表就是数据排成像一条线一样的结构。

常见的线性表结构：数组，链表、队列、栈等。

<br/>
<img src='https://github.com/jiangxia/Algorithms/raw/master/images/4.jpg' width='800'>
<br/>

与它相对立的概念是非线性表，比如二叉树、堆、图等。

<br/>
<img src='https://github.com/jiangxia/Algorithms/raw/master/images/5.jpg' width='800'>
<br/>

## 连续的内存空间和相同类型的数据

优点：两个限制使得数组具有随机访问的特性

缺点：删除，插入数据效率低

## 数组怎么根据下标随机访问的？

通过寻址公式，计算出该元素存储的内存地址：

```
a[i]_address = base_address + i * data_type_size
```

<br/>

# 低效的“插入”和“删除”

## 插入

若有一元素想往int[n]的第k个位置插入数据，需要在k-n的位置往后移。

最好情况时间复杂度 O(1)

最坏情况复杂度为O(n)

平均情况时间复杂度为O(n)

如果数组中的数据不是有序的，也就是无规律的情况下，可以直接把第k个位置上的数据移到最后，然后将插入的数据直接放在第k个位置上。

这样时间复杂度就将为 O（1）了。

## 删除

与插入类似，为了保持内存的连续性。

最好情况时间复杂度 O(1)

最坏情况复杂度为O(n)

平均负责度为O(n)

提高效率：将多次删除操作中集中在一起执行，可以先记录已经删除的数据，但是不进行数据迁移，而仅仅是记录，当发现没有更多空间存储时，再执行真正的删除操作。这也是 JVM 标记清除垃圾回收算法的核心思想。

<br/>

# 数组访问越界问题

C语言中的数据越界是一种未决行为，一般比较难发现的逻辑错误。相比之下，Java会有越界检查。

<br/>

# 用数组还是容器？

针对数组类型，很多语言都提供了容器类，比如Java中的ArrayList、C++ STL中的vector。

在项目开发中，什么时候适合用数组，什么时候适合用容器呢？

数组需要预先指定大小

容器如ArrayList可以动态扩容。

1.希望存储基本类型数据，可以用数组
2.事先知道数据大小，并且操作简单，可以用数组
3.表示多维数组时，用数组往往会更加直观。
4.业务开发，使用容器足够，开发框架，追求性能，首选数组。

<br/>

# 为什么数组要从 0 开始编号？

由于数组是通过寻址公式，计算出该元素存储的内存地址：

```
a[i]_address = base_address + i * data_type_size
```

如果数组是从 1 开始计数，那么就会变成：

```
a[i]_address = base_address + （i-1）* data_type_size
```

对于CPU来说，多了一次减法的指令。

当然，还有一定的历史原因。

C语言设计者用0开始计数数组下标，之后的Java、JavaScript等高级语言都效仿了C语言，或者说，为了在一定程度上减少C语言程序员学习Java的学习成本，因此继续沿用了从0开始计数的习惯。